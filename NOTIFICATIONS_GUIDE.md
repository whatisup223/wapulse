# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช - ุฏููู ุงูุชุทุจูู ุงูุดุงูู

## ูุธุฑุฉ ุนุงูุฉ
ูุธุงู ุงูุฅุดุนุงุฑุงุช ูู ุงูุชุทุจูู ูุฏุนู ุฅุดุนุงุฑุงุช ุงููุชุตูุญ (Desktop Notifications) ูุฅุจูุงุก ุงููุณุชุฎุฏููู ุนูู ุงุทูุงุน ุจุงูุฃุญุฏุงุซ ุงููููุฉ ุญุชู ุนูุฏูุง ูููู ุงูุชุทุจูู ูู ุงูุฎูููุฉ.

---

## ๐ฏ ุงูุฃุญุฏุงุซ ุงูุชู ุชูุฑุณู ุฅุดุนุงุฑุงุช

### 1. ุฑุณุงุฆู WhatsApp ุงููุงุฑุฏุฉ ุงูุฌุฏูุฏุฉ
**ูุชู ุชูุฑุณู:**
- ุนูุฏูุง ูุฑุฏ ุนููู ุนูู ุฑุณุงูุฉ
- ุนูุฏูุง ูุจุฏุฃ ุนููู ุฌุฏูุฏ ูุญุงุฏุซุฉ
- ุนูุฏ ุงุณุชูุงู ุฑุณุงูุฉ ูู ูุญุงุฏุซุฉ ุบูุฑ ููุชูุญุฉ ุญุงููุงู

**ูุญุชูู ุงูุฅุดุนุงุฑ:**
- **ุงูุนููุงู**: "ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู [ุงุณู ุงููุฑุณู]"
- **ุงููุต**: ูุนุงููุฉ ุฃูู 50 ุญุฑู ูู ุงูุฑุณุงูุฉ
- **ุงูุฃููููุฉ**: ุตูุฑุฉ ุงูุจุฑููุงูู ูููุฑุณู (ุฅู ููุฌุฏุช)

**ูุซุงู:**
```
๐ฑ ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู ุฃุญูุฏ ูุญูุฏ
   "ูุฑุญุจุงูุ ุฃุฑูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุงูููุชุฌ..."
```

**ููู ุชุนูู:**
```typescript
// ูู ุตูุญุฉ Inbox ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ
import { sendNewMessageNotification, checkNotificationSettings } from '@/utils/notifications';

// ุงูุชุญูู ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช
const notificationsEnabled = await checkNotificationSettings();

if (notificationsEnabled && !message.fromMe) {
  sendNewMessageNotification(
    chat.name,           // ุงุณู ุงููุฑุณู
    message.body,        // ูุต ุงูุฑุณุงูุฉ
    language            // ุงููุบุฉ
  );
}
```

---

### 2. ุญุงูุฉ ุงูุญููุงุช ุงูุชุณููููุฉ
**ูุชู ุชูุฑุณู:**
- โ **ุนูุฏ ุงูุชูุงู ุงูุญููุฉ**: ุจุนุฏ ุฅุฑุณุงู ุฌููุน ุงูุฑุณุงุฆู
- โ **ุนูุฏ ูุดู ุงูุญููุฉ**: ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูู ุงูุฅุฑุณุงู
- ๐ **ุนูุฏ ูุฌุงุญ ุงูุญููุฉ**: ุนูุฏ ุชุฃููุฏ ุงูุฅุฑุณุงู ุงููุงุฌุญ

**ูุญุชูู ุงูุฅุดุนุงุฑ:**
- **ุงูุนููุงู**: ุญุงูุฉ ุงูุญููุฉ (ูุฌุญุช/ูุดูุช/ุงูุชููุช)
- **ุงููุต**: ุงุณู ุงูุญููุฉ + ุนุฏุฏ ุงูุฑุณุงุฆู ุงูููุฑุณูุฉ
- **ุงูุฃููููุฉ**: ุฃููููุฉ ุงูุชุทุจูู

**ูุซุงู:**
```
โ ุงูุชููุช ุงูุญููุฉ
   "ุนุฑุถ ุฑูุถุงู" - ุชู ุงูุฅุฑุณุงู ูู 150 ุนููู
```

**ููู ุชุนูู:**
```typescript
// ูู ุตูุญุฉ CreateCampaign ุนูุฏ ุฅุฑุณุงู ุงูุญููุฉ
import { sendCampaignNotification } from '@/utils/notifications';

// ุจุนุฏ ุฅุฑุณุงู ุงูุญููุฉ ุจูุฌุงุญ
sendCampaignNotification(
  campaignName,        // ุงุณู ุงูุญููุฉ
  'completed',         // ุงูุญุงูุฉ: success | failed | completed
  language            // ุงููุบุฉ
);
```

---

### 3. ุชุญุฏูุซุงุช ุงูุงุชุตุงู ูุงูุญุงูุฉ
**ูุชู ุชูุฑุณู:**
- ๐ **ุงููุทุงุน ุงุชุตุงู WhatsApp**: ุนูุฏ ููุฏุงู ุงูุงุชุตุงู ุจุงูู API
- ๐ฑ **ุงูุชูุงุก ุตูุงุญูุฉ QR Code**: ูุญุชุงุฌ ุงููุณุชุฎุฏู ูุฅุนุงุฏุฉ ุงููุณุญ
- โ๏ธ **ูุดุงูู ูู ุงูู API**: ุฃุฎุทุงุก ูู ุงูุงุชุตุงู ุจู Evolution API

**ูุญุชูู ุงูุฅุดุนุงุฑ:**
- **ุงูุนููุงู**: ููุน ุงููุดููุฉ
- **ุงููุต**: ุชูุงุตูู ุงููุดููุฉ + ุงูุฅุฌุฑุงุก ุงููุทููุจ
- **ุงูุฃููููุฉ**: ุฃููููุฉ ุชุญุฐูุฑ

**ูุซุงู:**
```
โ๏ธ ุงููุทุน ุงุชุตุงู WhatsApp
   ูุฑุฌู ุงูุชุญูู ูู ุงูุงุชุตุงู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
```

---

## ๐ง ููููุฉ ุงูุชุทุจูู ูู ุงูููุฏ

### ุงูุฎุทูุฉ 1: ุงุณุชูุฑุงุฏ ุงููุธุงุฆู ุงููุณุงุนุฏุฉ
```typescript
import { 
  sendNewMessageNotification,
  sendCampaignNotification,
  sendNotification,
  checkNotificationSettings 
} from '@/utils/notifications';
```

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช
```typescript
// ูู ุจุฏุงูุฉ ุงููููู
const [notificationsEnabled, setNotificationsEnabled] = useState(false);

useEffect(() => {
  const checkSettings = async () => {
    const enabled = await checkNotificationSettings();
    setNotificationsEnabled(enabled);
  };
  checkSettings();
}, []);
```

### ุงูุฎุทูุฉ 3: ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ุนูุฏ ุงูุญุฏุซ

#### ูุซุงู 1: ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู Inbox
```typescript
// ูู useEffect ุงูุฐู ูุณุชูุน ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ
useEffect(() => {
  const handleNewMessage = (message: EvolutionMessage) => {
    // ุชุญุฏูุซ ุงููุงุฌูุฉ
    setMessages(prev => [...prev, message]);
    
    // ุฅุฑุณุงู ุฅุดุนุงุฑ ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูู ุนููู (ููุณุช ููู)
    if (notificationsEnabled && !message.fromMe) {
      const chat = chats.find(c => c.id === message.chatId);
      if (chat) {
        sendNewMessageNotification(
          chat.name,
          message.body,
          language
        );
      }
    }
  };
  
  // ุงูุงุณุชูุงุน ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ
  // ... ููุฏ ุงูุงุณุชูุงุน ููู WebSocket ุฃู Polling
}, [notificationsEnabled, language]);
```

#### ูุซุงู 2: ุญููุฉ ุชุณููููุฉ ูู CreateCampaign
```typescript
const handleSendCampaign = async () => {
  try {
    setIsSending(true);
    
    // ุฅุฑุณุงู ุงูุญููุฉ
    const result = await sendCampaignMessages(campaign);
    
    // ุฅุฑุณุงู ุฅุดุนุงุฑ ุจุงููุฌุงุญ
    if (notificationsEnabled) {
      sendCampaignNotification(
        campaign.name,
        'completed',
        language
      );
    }
    
    alert('ุชู ุฅุฑุณุงู ุงูุญููุฉ ุจูุฌุงุญ!');
  } catch (error) {
    // ุฅุฑุณุงู ุฅุดุนุงุฑ ุจุงููุดู
    if (notificationsEnabled) {
      sendCampaignNotification(
        campaign.name,
        'failed',
        language
      );
    }
    
    alert('ูุดู ุฅุฑุณุงู ุงูุญููุฉ');
  } finally {
    setIsSending(false);
  }
};
```

#### ูุซุงู 3: ูุดููุฉ ูู ุงูุงุชุตุงู ูู Connection
```typescript
const checkConnection = async () => {
  try {
    const response = await fetch(`${EVOLUTION_URL}/instance/connectionState/${instanceName}`);
    const data = await response.json();
    
    if (data.state !== 'open') {
      // ุฅุฑุณุงู ุฅุดุนุงุฑ ุจูุดููุฉ ุงูุงุชุตุงู
      if (notificationsEnabled) {
        sendNotification(
          language === 'ar' ? 'โ๏ธ ุงููุทุน ุงุชุตุงู WhatsApp' : 'โ๏ธ WhatsApp Disconnected',
          {
            body: language === 'ar' 
              ? 'ูุฑุฌู ุงูุชุญูู ูู ุงูุงุชุตุงู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ'
              : 'Please check connection and try again',
            tag: 'connection-issue',
            requireInteraction: true // ูุจูู ุงูุฅุดุนุงุฑ ุญุชู ูุถุบุท ุงููุณุชุฎุฏู
          }
        );
      }
    }
  } catch (error) {
    console.error('Connection check failed:', error);
  }
};
```

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ููุชุทุจูู

### ูู ุตูุญุฉ Inbox:
- [ ] ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `utils/notifications`
- [ ] ุฅุถุงูุฉ state ููุชุญูู ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช
- [ ] ุฅุถุงูุฉ useEffect ููุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ (ููุณุช ูู ุงููุณุชุฎุฏู)
- [ ] ุนุฏู ุฅุฑุณุงู ุฅุดุนุงุฑ ุฅุฐุง ูุงูุช ุงููุญุงุฏุซุฉ ููุชูุญุฉ ุญุงููุงู

### ูู ุตูุญุฉ CreateCampaign:
- [ ] ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `utils/notifications`
- [ ] ุฅุถุงูุฉ state ููุชุญูู ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ุงูุชูุงู ุงูุญููุฉ
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ูุดู ุงูุญููุฉ

### ูู ุตูุญุฉ Connection:
- [ ] ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `utils/notifications`
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู
- [ ] ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ุงูุชูุงุก ุตูุงุญูุฉ QR Code

---

## ๐จ ุชุฎุตูุต ุงูุฅุดุนุงุฑุงุช

### ุฅุถุงูุฉ ุตูุช ููุฅุดุนุงุฑ
```typescript
sendNotification(title, {
  body: message,
  silent: false,  // ุชูุนูู ุงูุตูุช
});
```

### ุฅุดุนุงุฑ ูุชุทูุจ ุชูุงุนู ุงููุณุชุฎุฏู
```typescript
sendNotification(title, {
  body: message,
  requireInteraction: true,  // ูุง ูุฎุชูู ุชููุงุฆูุงู
});
```

### ุฅุดุนุงุฑ ูุน ุฅุฌุฑุงุกุงุช
```typescript
const notification = sendNotification(title, {
  body: message,
  actions: [
    { action: 'reply', title: 'ุฑุฏ' },
    { action: 'ignore', title: 'ุชุฌุงูู' }
  ]
});

notification?.addEventListener('notificationclick', (event) => {
  if (event.action === 'reply') {
    // ูุชุญ ุตูุญุฉ ุงูุฑุฏ
    window.focus();
    // ... ููุฏ ูุชุญ ุงููุญุงุฏุซุฉ
  }
});
```

---

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

1. **ุงุญุชุฑุงู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู**: 
   - ูุง ุชูุฑุณู ุฅุดุนุงุฑุงุช ุฅูุง ุฅุฐุง ูุนูููุง ุงููุณุชุฎุฏู
   - ุงูุชุญูู ูู `checkNotificationSettings()` ูุจู ูู ุฅุดุนุงุฑ

2. **ุนุฏู ุฅุฑุณุงู ูุนูููุงุช ุญุณุงุณุฉ**:
   - ูุนุงููุฉ ุงูุฑุณุงูุฉ ูุญุฏูุฏุฉ ุจู 50 ุญุฑู
   - ุนุฏู ุฅุฑุณุงู ุฃุฑูุงู ููุงุชู ุฃู ุจูุงูุงุช ุดุฎุตูุฉ

3. **ุฅุบูุงู ุชููุงุฆู**:
   - ุงูุฅุดุนุงุฑุงุช ุชูุบูู ุชููุงุฆูุงู ุจุนุฏ 5 ุซูุงูู
   - ุฅูุง ุฅุฐุง ูุงูุช ุชุชุทูุจ ุชูุงุนู (`requireInteraction: true`)

---

## ๐ฑ ุฏุนู ุงููุชุตูุญุงุช

| ุงููุชุตูุญ | ุงูุฏุนู | ููุงุญุธุงุช |
|---------|-------|----------|
| Chrome  | โ ูุงูู | ูุฏุนู ุฌููุน ุงูููุฒุงุช |
| Firefox | โ ูุงูู | ูุฏุนู ุฌููุน ุงูููุฒุงุช |
| Edge    | โ ูุงูู | ูุฏุนู ุฌููุน ุงูููุฒุงุช |
| Safari  | โ๏ธ ุฌุฒุฆู | ูุชุทูุจ macOS 10.14+ |
| Opera   | โ ูุงูู | ูุฏุนู ุฌููุน ุงูููุฒุงุช |

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑุ
1. ุชุญูู ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช ูู ุงูุฅุนุฏุงุฏุงุช
2. ุชุญูู ูู ุฅุฐู ุงููุชุตูุญ (Settings โ Notifications)
3. ุชุญูู ูู Console ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุฃู `checkNotificationSettings()` ุชูุฑุฌุน `true`

### ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจููุ
- ูุฐุง ุณููู ุทุจูุนู! ุงูุฅุดุนุงุฑุงุช ุชุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุจููุจ
- ูุฅููุงููุงุ ูุฌุจ ุฅููุงู ุงูุฅุดุนุงุฑุงุช ูู ุงูุฅุนุฏุงุฏุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุทุจูู ุงูุฅุดุนุงุฑุงุช ูู Inbox** (ุฃููููุฉ ุนุงููุฉ)
2. **ุชุทุจูู ุงูุฅุดุนุงุฑุงุช ูู CreateCampaign** (ุฃููููุฉ ูุชูุณุทุฉ)
3. **ุชุทุจูู ุงูุฅุดุนุงุฑุงุช ูู Connection** (ุฃููููุฉ ููุฎูุถุฉ)
4. **ุงุฎุชุจุงุฑ ุดุงูู** ุนูู ุฌููุน ุงููุชุตูุญุงุช
5. **ุฅุถุงูุฉ Service Worker** ููุฅุดุนุงุฑุงุช ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู (ูุณุชูุจูุงู)
